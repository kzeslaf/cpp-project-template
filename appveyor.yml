image:
    - Visual Studio 2019
    
platform:
    - Win32
    - x64

configuration:
    - Debug
    - Release
    
environment:
  matrix:
    # Visual Studio 2015
    - TOOLCHAIN: v140
      STD: 14
      
    # Visual Studio 2017
    - TOOLCHAIN: v141
      STD: 14
    - TOOLCHAIN: v141
      STD: 17
      
    # Visual Studio 2019
    - TOOLCHAIN: v142
      STD: 14
    - TOOLCHAIN: v142
      STD: 17

install:
    - git submodule init
    - git submodule update

before_build:
    - mkdir build
    - cd build

build_script:
    - cmake -A %PLATFORM% -T %TOOLCHAIN% -DCMAKE_CXX_STANDARD=%STD% -Dgtest_force_shared_crt=on ..
    - cmake --build . --config %CONFIGURATION%
 
test_script:
    - test\%CONFIGURATION%\test-libmymath.exe
